# Mosh-Java

## P01-Ultimate 1 -1.1 Fundamentals

In 1990, people in Shanghai consumed 24% sugar, 22% starches, 42% fat, and 12% protein. In 2005, people in Shanghai consumed 15% sugar, 43% starches, 30% fat, and 12% protein. The data suggests that people in Shanghai have reduced their sugar intake by 9%, increased their starch intake by 21%, reduced their fat intake by 12%, and maintained their protein intake at 12%.

The data shows that people in Shanghai have reduced their sugar intake by 9%, which is a significant change. They have also increased their starch intake by 21%, which is also significant. However, the reduction in fat intake is only 12%, which is not as significant as the other changes. The protein intake has remained the same at 12%.

## P02-1 -1.2 Types

## P03-1 -1.3 Control Flow

## P04-1 -1.4 Clean Coding

## P05-1 -1.5 Debugging and Deploying Applications

## P06-Ultimate  2 -2.1 Object-oriented Programming

## P07- 2 -2.2 Classes

## P08- 2 -2.3 Refactoring Towards an Object-oriented Design

## P09- 2 -2.4 Inheritance

## P10- 2 -2.5 Interfaces

## P11-Ultimate  3 -3.1 Advanced Topics

## P12-3 -3.2  Exceptions

## P13-3 -3.3 Generics

```java
    public void f1(List<? extends Fruit> fruits){
        Fruit fruit = fruits.get(0);
        // fruits.add(fruit); // 报错，无法往里塞，因为我们找不到CAP#1及其子类
    }

    public void f2(List<? super Fruit> fruits){
        // Fruit fruit = fruits.get(0); // 报错，无法从中读取，因为fruits中存储的可能是Object或者别的，不一定与Fruit类兼容
        fruits.add(new Fruit());
    }
```





## P14-3 -3.4 Collections

## P15-3 -3.5 Lambda Expressions and Functional Interfaces



```java
// Consumer.java
...
	default Consumer<T> andThen(Consumer<? super T> after) {
        Objects.requireNonNull(after);
        return (T t) -> { accept(t); after.accept(t); };
    }
...
```

这里要搞清楚的问题是为什么用 `<? super T>`，首先`T`是一个泛型，可以先不管，我们看返回值有个方法调用`after.accept(t)`，如果不是`T`的父类，假设传进去的是一个`T`的子类，传进去的`t`是`T`类型，不一定能调用子类的`accept`方法，所以一定是一个父类的



看了`Function.java`的源码，感觉参数值要用`<? super T>`，返回值要用`<? extend T>`，为什么呢

- 首先看参数值，参数值是设置的，自己定的，所以是`set`，所以要用`super`
- 返回值，外部是要接受的，接受就要用`extend`

## P16-3 -3.6 Streams

如何将`Stream<List<Integer>>`转化为`Stream<Integer>`？

```java
var stream = Stream.of(List.of(1,2,3), List.of(4,5,6))

stream
    .flatMap(list->list.stream())
    .forEach(item -> System.out.println(item))
```



## P17-3 -3.7 Concurrency and Multi-threading

## P18-3 -3.8 The Executive Framework



还差一些东西要听：反射，JVM，字节码，注解